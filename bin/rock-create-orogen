#! /bin/sh

name=$1
if test -z "$name"; then
    echo "usage: rock-create-orogen dirname"
    exit 1
fi
if test -e "$name"; then
    echo "$name already exists"
    exit 1
fi

orogen create $name
cd $name
if test -z "$ROCK_TEMPLATE_PREFIX"; then
    ROCK_TEMPLATE_PREFIX=git://gitorious.org/rock-base/template_
    ROCK_TEMPLATE_SUFFIX=.git
    wget http://gitorious.org/rock-base/template_cmake_lib/blobs/raw/master/manifest.xml


    echo
    echo "Please fill out $name/manifest.xml "
    echo
    echo "This is needed for autoproj to keep track of the dependencies and"
    echo "to tell other people what the orogen package is about."
    echo

else
    cp ${ROCK_TEMPLATE_PREFIX}/cmake_lib/manifest.xml .
    sh ${ROCK_TEMPLATE_PREFIX}/cmake_lib/config_manifest.sh
fi

